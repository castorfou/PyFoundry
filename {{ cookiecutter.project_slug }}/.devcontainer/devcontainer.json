{
    "name": "{{ cookiecutter.project_name }} - Dev Environment",
    "image": "mcr.microsoft.com/devcontainers/python:1-3.12-bullseye",
	"runArgs": [
		"--network=host",
		"--label", "com.centurylinklabs.watchtower.enable=false",
		"--env", "CONTAINER_NAME=vscode-dev-container_{{ cookiecutter.project_slug }}"
	],    
    
    // Variables d'environnement
    "containerEnv": {
        "PROJECT_NAME": "{{ cookiecutter.project_name }}",
        "PROJECT_SLUG": "{{ cookiecutter.project_slug }}",
        "PYTHON_VERSION": "{{ cookiecutter.python_version }}",
        "ENVIRONMENT": "development",
        "PYTHONPATH": "/workspaces/{{ cookiecutter.project_slug }}/src",
        "DATA_DIR": "/workspaces/{{ cookiecutter.project_slug }}/data",
        "JUPYTER_CONFIG_DIR": "/workspaces/{{ cookiecutter.project_slug }}/.jupyter"
    },
    
    "customizations": {
        "vscode": {
			"extensions": [
				"ms-toolsai.jupyter",
				"ms-toolsai.vscode-jupyter-cell-tags",
				"ms-toolsai.jupyter-renderers",
				"ms-toolsai.vscode-jupyter-slideshow",
				"ms-toolsai.jupyter-keymap",
				"ms-python.isort",
				"ms-python.debugpy",
				"ms-python.python",
				"github.vscode-github-actions",
				"mikoz.black-py",
				"vscode-icons-team.vscode-icons",
				"mongodb.mongodb-vscode",
				"yzhang.markdown-all-in-one",
				"ukoloff.win-ca",
				"ms-python.vscode-pylance",
				"GitHub.copilot-chat",
				"GitHub.copilot",
				"dbaeumer.vscode-eslint",
				"ms-python.autopep8"
			],
            "settings": {
                // Configuration Python
                "python.defaultInterpreterPath": "./.venv/bin/python",
                "python.terminal.activateEnvironment": true,
                "python.analysis.autoImportCompletions": true,
                "python.analysis.typeCheckingMode": "basic",
                
                // Configuration Jupyter
                "jupyter.askForKernelRestart": false,
                "jupyter.interactiveWindowMode": "perFile",
                "jupyter.notebookFileRoot": "${workspaceFolder}/notebooks",
                
                // Configuration des formatters
                "python.formatting.provider": "black",
                "python.sortImports.args": ["--profile", "black"],
                "[python]": {
                    "editor.defaultFormatter": "ms-python.black-formatter",
                    "editor.formatOnSave": true,
                    "editor.codeActionsOnSave": {
                        "source.organizeImports": true
                    }
                },
                
                // Configuration g√©n√©rale
                "files.autoSave": "afterDelay",
                "files.autoSaveDelay": 1000,
                "editor.minimap.enabled": true,
                "editor.rulers": [100],
                "files.trimTrailingWhitespace": true,
                "files.insertFinalNewline": true,
                
                // Configuration des tests
                "python.testing.pytestEnabled": true,
                "python.testing.unittestEnabled": false,
                "python.testing.pytestArgs": ["tests"],
                
                // Exclusions pour am√©liorer les performances
                "files.exclude": {
                    "**/__pycache__": true,
                    "**/.pytest_cache": true,
                    "**/node_modules": true,
                    "**/.git": false
                },
                "search.exclude": {
                    "**/__pycache__": true,
                    "**/.venv": true,
                    "**/node_modules": true
                }
            }
        }
    },
       
    // Configuration du shell et de l'environnement
    "postCreateCommand": "bash .devcontainer/postCreateCommand.sh",
    "postStartCommand": "echo 'üöÄ {{ cookiecutter.project_name }} - Environnement pr√™t!'",
    
    // Utilisateur non-root pour la s√©curit√©
    "remoteUser": "vscode",
    
    // Optimisations de performance
    "shutdownAction": "none",
}